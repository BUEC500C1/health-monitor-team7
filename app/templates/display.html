<!DOCTYPE HTML>
<html>
<title>Health Monitor Display</title>
<link rel="stylesheet" href="{{ url_for('static', filename='css/display.css') }}">
<head>
<script>
window.onload = function () {
	var chart = new CanvasJS.Chart("chartContainer", {
  animationEnabled: true,
	title:{
		text: "Click on the values below the graph to toggle data displayed",
    fontColor: "#ebf0f7",
    fontFamily: "tahoma"
	},
  backgroundColor: "#2a2a2a",
  axisX: {
    labelFontColor: "#ebf0f7"
  },
	axisY:[
  {
    title: "Pulse",
		lineColor: "#369EAD",
		tickColor: "#369EAD",
		labelFontColor: "#369EAD",
		titleFontColor: "#369EAD",
		suffix: "bpm"
  },
	{
    title: "Blood Oxygen Content",
		lineColor: "#C24642",
		tickColor: "#C24642",
		labelFontColor: "#C24642",
		titleFontColor: "#C24642",
		suffix: "%"
	}],
	axisY2: {
		title: "Blood Pressure",
		lineColor: "#7F6084",
		tickColor: "#7F6084",
		labelFontColor: "#7F6084",
		titleFontColor: "#7F6084",
		suffix: "mm Hg"
	},
	toolTip: {
		shared: true
	},
	legend: {
		cursor: "pointer",
    fontColor: "#ebf0f7",
		itemclick: toggleDataSeries
	},
	data: [{
		type: "area",
		name: "Pulse",
		color: "#369EAD",
		showInLegend: true,
		axisYIndex: 1,
		dataPoints: [
			{ x: new Date(2017, 00, 7), y: 85.4 },
			{ x: new Date(2017, 00, 14), y: 92.7 },
			{ x: new Date(2017, 00, 21), y: 64.9 },
			{ x: new Date(2017, 00, 28), y: 58.0 },
			{ x: new Date(2017, 01, 4), y: 63.4 },
			{ x: new Date(2017, 01, 11), y: 69.9 },
			{ x: new Date(2017, 01, 18), y: 88.9 },
			{ x: new Date(2017, 01, 25), y: 66.3 },
			{ x: new Date(2017, 02, 4), y: 82.7 },
			{ x: new Date(2017, 02, 11), y: 60.2 },
			{ x: new Date(2017, 02, 18), y: 87.3 },
			{ x: new Date(2017, 02, 25), y: 98.5 }
		]
	},
	{
		type: "area",
		name: "Blood Pressure",
		color: "#C24642",
		axisYIndex: 0,
		showInLegend: true,
		dataPoints: [
			{ x: new Date(2017, 00, 7), y: 32.3 },
			{ x: new Date(2017, 00, 14), y: 33.9 },
			{ x: new Date(2017, 00, 21), y: 26.0 },
			{ x: new Date(2017, 00, 28), y: 15.8 },
			{ x: new Date(2017, 01, 4), y: 18.6 },
			{ x: new Date(2017, 01, 11), y: 34.6 },
			{ x: new Date(2017, 01, 18), y: 37.7 },
			{ x: new Date(2017, 01, 25), y: 24.7 },
			{ x: new Date(2017, 02, 4), y: 35.9 },
			{ x: new Date(2017, 02, 11), y: 12.8 },
			{ x: new Date(2017, 02, 18), y: 38.1 },
			{ x: new Date(2017, 02, 25), y: 42.4 }
		]
	},
	{
		type: "area",
		name: "Blood Oxygen Content",
		color: "#7F6084",
		axisYType: "secondary",
		showInLegend: true,
		dataPoints: [
			{ x: new Date(2017, 00, 7), y: 42.5 },
			{ x: new Date(2017, 00, 14), y: 44.3 },
			{ x: new Date(2017, 00, 21), y: 28.7 },
			{ x: new Date(2017, 00, 28), y: 22.5 },
			{ x: new Date(2017, 01, 4), y: 25.6 },
			{ x: new Date(2017, 01, 11), y: 45.7 },
			{ x: new Date(2017, 01, 18), y: 54.6 },
			{ x: new Date(2017, 01, 25), y: 32.0 },
			{ x: new Date(2017, 02, 4), y: 43.9 },
			{ x: new Date(2017, 02, 11), y: 26.4 },
			{ x: new Date(2017, 02, 18), y: 40.3 },
			{ x: new Date(2017, 02, 25), y: 54.2 }
		]
	}]
});
chart.render();

function toggleDataSeries(e) {
	if (typeof (e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
		e.dataSeries.visible = false;
	} else {
		e.dataSeries.visible = true;
	}
	e.chart.render();
}

}
</script>
</head>
<body>
  <div style="width:100%;text-align:center;display:flex;flex-direction: column;justify-content:center;align-items: center;height:100vh;background-color:#2a2a2a;">
  <div id="chartContainer" style="height: 370px; width: 80%; padding:20px;"></div>
	<br />
	{% if alert.bloodPressure %}
	<h2 style="width:80%;color:#f56262;padding:5px;">Alert: Dangerous blood pressure level detected!</h2>
	{% endif %}
	{% if alert.pulse %}
	<h2 style="width:80%;color:#f56262;padding:5px;">Alert: Dangerous pulse level detected!</h2>
	{% endif %}
	{% if alert.oxygenContent %}
	<h2 style="width:80%;color:#f56262;padding:5px;">Alert: Dangerous blood oxygen content detected!</h2>
	{% endif %}
	<div style="width:80%;display:flex;flex-direction:row;justify-content:center;">
		<h3 style="padding:10px;color:white;">Predicted Pulse: {{AIdata.AIpulse}} bpm</h3>
		<h3 style="padding:10px;color:white;">Predicted Blood Pressure: {{AIdata.AIbloodPressure}} mm Hg</h3>
		<h3 style="padding:10px;color:white;">Predicted Oxygen Content: {{AIdata.AIoxygenContent}}%</h3>
	</div>
</div>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
</body>
</html>
